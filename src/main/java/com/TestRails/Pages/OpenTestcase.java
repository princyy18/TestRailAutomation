package com.TestRails.Pages;

import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.CacheLookup;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.How;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class OpenTestcase {
	// Add 3 things and you will save your time by automating testrail

	final WebDriver driver; 
		
		//Constructor, as every page needs a Webdriver to find elements
		public OpenTestcase(WebDriver driver){
				this.driver=driver;
			}
		
		//Locating elements
			@FindBy(how = How.XPATH,using="//*[text()='Global Beta']") //add project name here
			@CacheLookup
			WebElement projectName;
			
			@FindBy(how = How.XPATH,using="//a[text()='Functional']")
			@CacheLookup
			WebElement TestCaseType;
			
			@FindBy(how = How.XPATH,using="//span[normalize-space()='Add Test Case']")
			@CacheLookup
			WebElement TestCaseButton;
			
			
			
			@FindBy(how = How.XPATH,using="//li[@id='section_id_chzn_o_1']") // add number of sub section here
			@CacheLookup
			WebElement selectPassportTemplate;
			
			@FindBy(how = How.XPATH,using="//div[@id='type_id_chzn']")
			@CacheLookup
			WebElement selectTypeDropdown;
			
			@FindBy(how = How.XPATH,using="//li[@id='type_id_chzn_o_5']") // add number of type - for ex 5 for functional here
			@CacheLookup
			WebElement selectType;
			
			@FindBy(how = How.XPATH,using="//a[normalize-space()='Add another']")
			@CacheLookup
			WebElement AddAnother;
			
			@FindBy(how = How.XPATH,using="//input[@id='title']")
			@CacheLookup
			WebElement Title;
			
			@FindBy(how = How.XPATH,using="//button[@id='accept']")
			@CacheLookup
			WebElement addTextCaseButton;
			
			@FindBy(how = How.XPATH,using="//div[@id='custom_preconds_display']")
			@CacheLookup
			WebElement addprecondition;
			
			@FindBy(how = How.XPATH,using="//div[@id='custom_steps_display']")
			@CacheLookup
			WebElement addsteps;
			
			@FindBy(how = How.XPATH,using="//a[@id='sidebar-suites-viewall']")
			@CacheLookup
			WebElement showmore;
			
			@FindBy(how = How.XPATH,using="//div[@id='template_id_chzn']//a[@class='chzn-single']")
			@CacheLookup
			WebElement selectSectionDropdown;
			
					
			//Opening Project
			public void OpenProjectAndTestCase() throws InterruptedException
			{
			//	((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);",projectName );	
				projectName.click();		
				showmore.click();
				Thread.sleep(1000);
			}
			
			//Selecting type of Testcases you want to add ---> for ex - click on Functional testcases
			public void OpenTestCase() throws InterruptedException
			{
				((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);",TestCaseType);
				TestCaseType.click();
			}				
			
			//click on Add TestCase button
			public void AddTestCase()
			{
				TestCaseButton.click();
			}
			
			//selecting section from section dropdown ---> for ex - Passport Menu
			public void selectSection() throws InterruptedException
			{
				selectSectionDropdown.click();
				new WebDriverWait(driver, Duration.ofSeconds(1)).until(ExpectedConditions.presenceOfElementLocated(By.id("section_id_chzn")));
				((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);",selectPassportTemplate);
				selectPassportTemplate.click();
				//Thread.sleep(500);
			}
			
			//selecting Type of Test Case from Type dropdown ---> for ex - Functional
			public void selectTestCaseType() throws InterruptedException
			{
				selectTypeDropdown.click();
				//Thread.sleep(500);
				new WebDriverWait(driver, Duration.ofSeconds(1)).until(ExpectedConditions.presenceOfElementLocated(By.id("type_id_chzn")));
				selectType.click();
			}
			public void precondition()
			{
			
//				addsteps.sendKeys("1.open the website by entering URL\n"
//						+ "2.enter email in email textfield which has not account in TAMP System\n"
//						+ "3.Click on Get Started button\n"
//						+ "4.Collect OTP from email inbox\n"
//						+ "5.enter Latest Valid Received OTP into text fields of OTP\n"
//						+ "6.enter all details into field\n"
//						+ "7.click on next button\n"
//						+ "8.click on circle\n"
//						+ "9.Select an image\n"
//						+ "10.click on next button\n"
//						+ "11.Move pointer based on requirement\n"
//						+ "12.click on next button\n"
//						+ "13.Enter valid number as per file\n"
//						+ "14.click on send text button\n"
//						+ "15.verify mobile number through mobile number or google authenticator\n"
//						+ "16.click on join button and join firms/teams\n"
//						+ "17.click on request button of any firms/teams\n"
//						+ "18.click on next button\n"
//						+ "19.Click on click here to search link\n"
//						+ "20.enter any firm name in search field\n"
//						+ "21.click on request button to request any firm or team\n"
//						+ "22.click on next button\n"
//						+ "23.verify firms and teams\n"
//						+ "24.click on next button\n");
				addprecondition.sendKeys("1.Login into TAMP through Credentials\n");
				addsteps.sendKeys("1.Go to my Account\n"
						+ "2.Click on Profile\n"
						+ "3.Click on Edit button\n"
						+ "4.Click on Teams from side menu\n");					
				Title.click();
			}
			
			//Wait for user to add details and click on Add Test Case
			public void waitforusertoclick()
			{

				WebDriverWait wait = new WebDriverWait(driver , Duration.ofMinutes(45));
				wait.pollingEvery(Duration.ofSeconds(1)).until(ExpectedConditions.elementToBeClickable(AddAnother));
				AddAnother.click();

			}

	}

